<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="boardMapper">

	<resultMap id="boardResultSet" type="Board">
		<id property="id" column="id"/>
		<result property="title" column="title"/>
		<result property="content" column="content"/>
		<result property="viewCount" column="view_count"/>
		<result property="inappropriateCount" column="inappropriate_count"/>
		<result property="spoilerCount" column="spoiler_count"/>
		<result property="likeCount" column="like_count"/>
		<result property="modifyDate" column="modify_date"/>
		<result property="createDate" column="create_date"/>
		<result property="status" column="status"/>
		<result property="memberId" column="member_id"/>
	</resultMap>
	
	<resultMap id="ImageResultSet" type="Image">
		<id property="id" column="id"/>
		<result property="path" column="path"/>
		<result property="originalName" column="original_name"/>
		<result property="changeName" column="change_name"/>
		<result property="type" column="type"/>
		<result property="boardId" column="board_id"/>
		<result property="noticeId" column="notice_id"/>
	</resultMap>
	
	
	<select id="getBoardCount" resultType="_int">
		select count(*)
		from tb_board
		where status='Y'
	</select>
	
	<select id="selectBoardList" resultMap="boardResultSet">
		select *
		from tb_board
		where status='Y'
		order by id desc
	</select>
	
	<insert id="insertBoard">
		insert into tb_board
		values(seq_board_id.nextval, #{title}, #{content}, default, 
				null, null, null, sysdate, sysdate, default, #{memberId})
	</insert>
	
	<insert id="insertImage">
		insert into tb_image
		values(seq_image_id.nextval, #{path}, #{originalName}, #{changeName}, 
				1, #{boardId}, null)
	</insert>
	
	<update id="updateCount">
		update tb_board
		set view_count = view_count + 1
		where id=#{id}
	</update>
	
	<select id="selectBoard" resultMap="boardResultSet">
		select *
		from tb_board
		where id=#{id}
	</select>
	
	<update id="deleteBoard">
		update tb_board
		set status='N'
		where id=#{id}
	</update>
	
	<update id="updateBoard">
		
	</update>
	
	<select id="selectCommentList" resultMap="">
		select *
		from tb_comment c, tb_board b
		where c.board_id=#{b.id}
		order by c.id desc
	</select>
	
	<insert id="insertComment">
	</insert>
	
	
	
</mapper>